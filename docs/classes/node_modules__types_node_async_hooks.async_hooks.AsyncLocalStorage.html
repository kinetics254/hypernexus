<!DOCTYPE html><html class="default" lang="en" data-base=".."><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>AsyncLocalStorage | Documentation</title><meta name="description" content="Documentation for Documentation"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="../assets/style.css"/><link rel="stylesheet" href="../assets/highlight.css"/><script defer src="../assets/main.js"></script><script async src="../assets/icons.js" id="tsd-icons-script"></script><script async src="../assets/search.js" id="tsd-search-script"></script><script async src="../assets/navigation.js" id="tsd-nav-script"></script><script async src="../assets/hierarchy.js" id="tsd-hierarchy-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><div class="table-cell" id="tsd-search"><div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-search"></use></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div><div class="field"><div id="tsd-toolbar-links"></div></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="../index.html" class="title">Documentation</a></div><div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-menu"></use></svg></a></div></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><ul class="tsd-breadcrumb"><li><a href="../index.html">Documentation</a></li><li><a href="../modules/node_modules__types_node_async_hooks.html">node_modules/@types/node/async_hooks</a></li><li><a href="../modules/node_modules__types_node_async_hooks.async_hooks.html">async_hooks</a></li><li><a href="node_modules__types_node_async_hooks.async_hooks.AsyncLocalStorage.html">AsyncLocalStorage</a></li></ul><h1>Class AsyncLocalStorage&lt;T&gt;</h1></div><section class="tsd-panel tsd-comment"><div class="tsd-comment tsd-typography"><p>This class creates stores that stay coherent through asynchronous operations.</p>
<p>While you can create your own implementation on top of the <code>node:async_hooks</code> module, <code>AsyncLocalStorage</code> should be preferred as it is a performant and memory
safe implementation that involves significant optimizations that are non-obvious
to implement.</p>
<p>The following example uses <code>AsyncLocalStorage</code> to build a simple logger
that assigns IDs to incoming HTTP requests and includes them in messages
logged within each request.</p>
<pre><code class="js"><span class="hl-1">import</span><span class="hl-2"> </span><span class="hl-3">http</span><span class="hl-2"> </span><span class="hl-1">from</span><span class="hl-2"> </span><span class="hl-4">&#39;node:http&#39;</span><span class="hl-2">;</span><br/><span class="hl-1">import</span><span class="hl-2"> { </span><span class="hl-3">AsyncLocalStorage</span><span class="hl-2"> } </span><span class="hl-1">from</span><span class="hl-2"> </span><span class="hl-4">&#39;node:async_hooks&#39;</span><span class="hl-2">;</span><br/><br/><span class="hl-0">const</span><span class="hl-2"> </span><span class="hl-5">asyncLocalStorage</span><span class="hl-2"> = </span><span class="hl-0">new</span><span class="hl-2"> </span><span class="hl-7">AsyncLocalStorage</span><span class="hl-2">();</span><br/><br/><span class="hl-0">function</span><span class="hl-2"> </span><span class="hl-7">logWithId</span><span class="hl-2">(</span><span class="hl-3">msg</span><span class="hl-2">) {</span><br/><span class="hl-2">  </span><span class="hl-0">const</span><span class="hl-2"> </span><span class="hl-5">id</span><span class="hl-2"> = </span><span class="hl-3">asyncLocalStorage</span><span class="hl-2">.</span><span class="hl-7">getStore</span><span class="hl-2">();</span><br/><span class="hl-2">  </span><span class="hl-3">console</span><span class="hl-2">.</span><span class="hl-7">log</span><span class="hl-2">(</span><span class="hl-4">`</span><span class="hl-0">${</span><span class="hl-3">id</span><span class="hl-8"> </span><span class="hl-2">!==</span><span class="hl-8"> </span><span class="hl-0">undefined</span><span class="hl-8"> </span><span class="hl-2">?</span><span class="hl-8"> </span><span class="hl-3">id</span><span class="hl-8"> </span><span class="hl-2">:</span><span class="hl-8"> </span><span class="hl-4">&#39;-&#39;</span><span class="hl-0">}</span><span class="hl-4">:`</span><span class="hl-2">, </span><span class="hl-3">msg</span><span class="hl-2">);</span><br/><span class="hl-2">}</span><br/><br/><span class="hl-0">let</span><span class="hl-2"> </span><span class="hl-3">idSeq</span><span class="hl-2"> = </span><span class="hl-9">0</span><span class="hl-2">;</span><br/><span class="hl-3">http</span><span class="hl-2">.</span><span class="hl-7">createServer</span><span class="hl-2">((</span><span class="hl-3">req</span><span class="hl-2">, </span><span class="hl-3">res</span><span class="hl-2">) </span><span class="hl-0">=&gt;</span><span class="hl-2"> {</span><br/><span class="hl-2">  </span><span class="hl-3">asyncLocalStorage</span><span class="hl-2">.</span><span class="hl-7">run</span><span class="hl-2">(</span><span class="hl-3">idSeq</span><span class="hl-2">++, () </span><span class="hl-0">=&gt;</span><span class="hl-2"> {</span><br/><span class="hl-2">    </span><span class="hl-7">logWithId</span><span class="hl-2">(</span><span class="hl-4">&#39;start&#39;</span><span class="hl-2">);</span><br/><span class="hl-2">    </span><span class="hl-6">// Imagine any chain of async operations here</span><br/><span class="hl-2">    </span><span class="hl-7">setImmediate</span><span class="hl-2">(() </span><span class="hl-0">=&gt;</span><span class="hl-2"> {</span><br/><span class="hl-2">      </span><span class="hl-7">logWithId</span><span class="hl-2">(</span><span class="hl-4">&#39;finish&#39;</span><span class="hl-2">);</span><br/><span class="hl-2">      </span><span class="hl-3">res</span><span class="hl-2">.</span><span class="hl-7">end</span><span class="hl-2">();</span><br/><span class="hl-2">    });</span><br/><span class="hl-2">  });</span><br/><span class="hl-2">}).</span><span class="hl-7">listen</span><span class="hl-2">(</span><span class="hl-9">8080</span><span class="hl-2">);</span><br/><br/><span class="hl-3">http</span><span class="hl-2">.</span><span class="hl-7">get</span><span class="hl-2">(</span><span class="hl-4">&#39;http://localhost:8080&#39;</span><span class="hl-2">);</span><br/><span class="hl-3">http</span><span class="hl-2">.</span><span class="hl-7">get</span><span class="hl-2">(</span><span class="hl-4">&#39;http://localhost:8080&#39;</span><span class="hl-2">);</span><br/><span class="hl-6">// Prints:</span><br/><span class="hl-6">//   0: start</span><br/><span class="hl-6">//   1: start</span><br/><span class="hl-6">//   0: finish</span><br/><span class="hl-6">//   1: finish</span>
</code><button type="button">Copy</button></pre>

<p>Each instance of <code>AsyncLocalStorage</code> maintains an independent storage context.
Multiple instances can safely exist simultaneously without risk of interfering
with each other's data.</p>
</div><div class="tsd-comment tsd-typography"><div class="tsd-tag-since"><h4 class="tsd-anchor-link"><a id="since" class="tsd-anchor"></a>Since<a href="#since" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h4><p>v13.10.0, v12.17.0</p>
</div></div></section> <section class="tsd-panel"><h4>Type Parameters</h4><ul class="tsd-type-parameter-list"><li><span><a id="t" class="tsd-anchor"></a><span class="tsd-kind-type-parameter">T</span></span></li></ul></section> <aside class="tsd-sources"><ul><li>Defined in node_modules/@types/node/async_hooks.d.ts:371</li></ul></aside><section class="tsd-panel-group tsd-index-group"><section class="tsd-panel tsd-index-panel"><details class="tsd-index-content tsd-accordion" open><summary class="tsd-accordion-summary tsd-index-summary"><h5 class="tsd-index-heading uppercase" role="button" aria-expanded="false" tabIndex="0"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-chevronSmall"></use></svg> Index</h5></summary><div class="tsd-accordion-details"><section class="tsd-index-section"><h3 class="tsd-index-heading">Constructors</h3><div class="tsd-index-list"><a href="node_modules__types_node_async_hooks.async_hooks.AsyncLocalStorage.html#constructor" class="tsd-index-link tsd-is-external"><svg class="tsd-kind-icon" viewBox="0 0 24 24" aria-label="Constructor"><use href="../assets/icons.svg#icon-512"></use></svg><span>constructor</span></a>
</div></section><section class="tsd-index-section"><h3 class="tsd-index-heading">Methods</h3><div class="tsd-index-list"><a href="node_modules__types_node_async_hooks.async_hooks.AsyncLocalStorage.html#disable" class="tsd-index-link tsd-is-external"><svg class="tsd-kind-icon" viewBox="0 0 24 24" aria-label="Method"><use href="../assets/icons.svg#icon-2048"></use></svg><span>disable</span></a>
<a href="node_modules__types_node_async_hooks.async_hooks.AsyncLocalStorage.html#enterwith" class="tsd-index-link tsd-is-external"><svg class="tsd-kind-icon" viewBox="0 0 24 24" aria-label="Method"><use href="../assets/icons.svg#icon-2048"></use></svg><span>enter<wbr/>With</span></a>
<a href="node_modules__types_node_async_hooks.async_hooks.AsyncLocalStorage.html#exit" class="tsd-index-link tsd-is-external"><svg class="tsd-kind-icon" viewBox="0 0 24 24" aria-label="Method"><use href="../assets/icons.svg#icon-2048"></use></svg><span>exit</span></a>
<a href="node_modules__types_node_async_hooks.async_hooks.AsyncLocalStorage.html#getstore" class="tsd-index-link tsd-is-external"><svg class="tsd-kind-icon" viewBox="0 0 24 24" aria-label="Method"><use href="../assets/icons.svg#icon-2048"></use></svg><span>get<wbr/>Store</span></a>
<a href="node_modules__types_node_async_hooks.async_hooks.AsyncLocalStorage.html#run" class="tsd-index-link tsd-is-external"><svg class="tsd-kind-icon" viewBox="0 0 24 24" aria-label="Method"><use href="../assets/icons.svg#icon-2048"></use></svg><span>run</span></a>
<a href="node_modules__types_node_async_hooks.async_hooks.AsyncLocalStorage.html#bind" class="tsd-index-link tsd-is-external"><svg class="tsd-kind-icon" viewBox="0 0 24 24" aria-label="Method"><use href="../assets/icons.svg#icon-2048"></use></svg><span>bind</span></a>
<a href="node_modules__types_node_async_hooks.async_hooks.AsyncLocalStorage.html#snapshot" class="tsd-index-link tsd-is-external"><svg class="tsd-kind-icon" viewBox="0 0 24 24" aria-label="Method"><use href="../assets/icons.svg#icon-2048"></use></svg><span>snapshot</span></a>
</div></section></div></details></section></section><details class="tsd-panel-group tsd-member-group tsd-accordion" open><summary class="tsd-accordion-summary" data-key="section-Constructors"><h2><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-chevronDown"></use></svg> Constructors</h2></summary><section><section class="tsd-panel tsd-member tsd-is-external"><a id="constructor" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><span>constructor</span><a href="#constructor" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul class="tsd-signatures tsd-is-external"><li class="tsd-is-external"><div class="tsd-signature tsd-anchor-link"><a id="constructorasynclocalstorage" class="tsd-anchor"></a><span class="tsd-signature-keyword">new</span> <span class="tsd-kind-constructor-signature">AsyncLocalStorage</span><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="node_modules__types_node_async_hooks.async_hooks.AsyncLocalStorage.html#constructorasynclocalstoraget">T</a><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">()</span><span class="tsd-signature-symbol">:</span> <a href="node_modules__types_node_async_hooks.async_hooks.AsyncLocalStorage.html" class="tsd-signature-type tsd-kind-class">AsyncLocalStorage</a><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="node_modules__types_node_async_hooks.async_hooks.AsyncLocalStorage.html#constructorasynclocalstoraget">T</a><span class="tsd-signature-symbol">&gt;</span><a href="#constructorasynclocalstorage" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></div><div class="tsd-description"><section class="tsd-panel"><h4>Type Parameters</h4><ul class="tsd-type-parameter-list"><li><span><a id="constructorasynclocalstoraget" class="tsd-anchor"></a><span class="tsd-kind-type-parameter">T</span></span></li></ul></section><h4 class="tsd-returns-title">Returns <a href="node_modules__types_node_async_hooks.async_hooks.AsyncLocalStorage.html" class="tsd-signature-type tsd-kind-class">AsyncLocalStorage</a><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="node_modules__types_node_async_hooks.async_hooks.AsyncLocalStorage.html#constructorasynclocalstoraget">T</a><span class="tsd-signature-symbol">&gt;</span></h4></div></li></ul></section></section></details><details class="tsd-panel-group tsd-member-group tsd-accordion" open><summary class="tsd-accordion-summary" data-key="section-Methods"><h2><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-chevronDown"></use></svg> Methods</h2></summary><section><section class="tsd-panel tsd-member tsd-is-external"><a id="disable" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><span>disable</span><a href="#disable" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul class="tsd-signatures tsd-is-external"><li class="tsd-is-external"><div class="tsd-signature tsd-anchor-link"><a id="disable-1" class="tsd-anchor"></a><span class="tsd-kind-call-signature">disable</span><span class="tsd-signature-symbol">()</span><span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">void</span><a href="#disable-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></div><div class="tsd-description"><code class="tsd-tag">Experimental</code><div class="tsd-comment tsd-typography"><p>Disables the instance of <code>AsyncLocalStorage</code>. All subsequent calls
to <code>asyncLocalStorage.getStore()</code> will return <code>undefined</code> until <code>asyncLocalStorage.run()</code> or <code>asyncLocalStorage.enterWith()</code> is called again.</p>
<p>When calling <code>asyncLocalStorage.disable()</code>, all current contexts linked to the
instance will be exited.</p>
<p>Calling <code>asyncLocalStorage.disable()</code> is required before the <code>asyncLocalStorage</code> can be garbage collected. This does not apply to stores
provided by the <code>asyncLocalStorage</code>, as those objects are garbage collected
along with the corresponding async resources.</p>
<p>Use this method when the <code>asyncLocalStorage</code> is not in use anymore
in the current process.</p>
</div><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">void</span></h4><div class="tsd-comment tsd-typography"><div class="tsd-tag-since"><h4 class="tsd-anchor-link"><a id="since-1" class="tsd-anchor"></a>Since<a href="#since-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h4><p>v13.10.0, v12.17.0</p>
</div></div><aside class="tsd-sources"><ul><li>Defined in node_modules/@types/node/async_hooks.d.ts:426</li></ul></aside></div></li></ul></section><section class="tsd-panel tsd-member tsd-is-external"><a id="enterwith" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><span>enter<wbr/>With</span><a href="#enterwith" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul class="tsd-signatures tsd-is-external"><li class="tsd-is-external"><div class="tsd-signature tsd-anchor-link"><a id="enterwith-1" class="tsd-anchor"></a><span class="tsd-kind-call-signature">enterWith</span><span class="tsd-signature-symbol">(</span><span class="tsd-kind-parameter">store</span><span class="tsd-signature-symbol">:</span> <a class="tsd-signature-type tsd-kind-type-parameter" href="node_modules__types_node_async_hooks.async_hooks.AsyncLocalStorage.html#constructorasynclocalstoraget">T</a><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">void</span><a href="#enterwith-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></div><div class="tsd-description"><code class="tsd-tag">Experimental</code><div class="tsd-comment tsd-typography"><p>Transitions into the context for the remainder of the current
synchronous execution and then persists the store through any following
asynchronous calls.</p>
<p>Example:</p>
<pre><code class="js"><span class="hl-0">const</span><span class="hl-2"> </span><span class="hl-5">store</span><span class="hl-2"> = { </span><span class="hl-3">id:</span><span class="hl-2"> </span><span class="hl-9">1</span><span class="hl-2"> };</span><br/><span class="hl-6">// Replaces previous store with the given store object</span><br/><span class="hl-3">asyncLocalStorage</span><span class="hl-2">.</span><span class="hl-7">enterWith</span><span class="hl-2">(</span><span class="hl-3">store</span><span class="hl-2">);</span><br/><span class="hl-3">asyncLocalStorage</span><span class="hl-2">.</span><span class="hl-7">getStore</span><span class="hl-2">(); </span><span class="hl-6">// Returns the store object</span><br/><span class="hl-7">someAsyncOperation</span><span class="hl-2">(() </span><span class="hl-0">=&gt;</span><span class="hl-2"> {</span><br/><span class="hl-2">  </span><span class="hl-3">asyncLocalStorage</span><span class="hl-2">.</span><span class="hl-7">getStore</span><span class="hl-2">(); </span><span class="hl-6">// Returns the same object</span><br/><span class="hl-2">});</span>
</code><button type="button">Copy</button></pre>

<p>This transition will continue for the <em>entire</em> synchronous execution.
This means that if, for example, the context is entered within an event
handler subsequent event handlers will also run within that context unless
specifically bound to another context with an <code>AsyncResource</code>. That is why <code>run()</code> should be preferred over <code>enterWith()</code> unless there are strong reasons
to use the latter method.</p>
<pre><code class="js"><span class="hl-0">const</span><span class="hl-2"> </span><span class="hl-5">store</span><span class="hl-2"> = { </span><span class="hl-3">id:</span><span class="hl-2"> </span><span class="hl-9">1</span><span class="hl-2"> };</span><br/><br/><span class="hl-3">emitter</span><span class="hl-2">.</span><span class="hl-7">on</span><span class="hl-2">(</span><span class="hl-4">&#39;my-event&#39;</span><span class="hl-2">, () </span><span class="hl-0">=&gt;</span><span class="hl-2"> {</span><br/><span class="hl-2">  </span><span class="hl-3">asyncLocalStorage</span><span class="hl-2">.</span><span class="hl-7">enterWith</span><span class="hl-2">(</span><span class="hl-3">store</span><span class="hl-2">);</span><br/><span class="hl-2">});</span><br/><span class="hl-3">emitter</span><span class="hl-2">.</span><span class="hl-7">on</span><span class="hl-2">(</span><span class="hl-4">&#39;my-event&#39;</span><span class="hl-2">, () </span><span class="hl-0">=&gt;</span><span class="hl-2"> {</span><br/><span class="hl-2">  </span><span class="hl-3">asyncLocalStorage</span><span class="hl-2">.</span><span class="hl-7">getStore</span><span class="hl-2">(); </span><span class="hl-6">// Returns the same object</span><br/><span class="hl-2">});</span><br/><br/><span class="hl-3">asyncLocalStorage</span><span class="hl-2">.</span><span class="hl-7">getStore</span><span class="hl-2">(); </span><span class="hl-6">// Returns undefined</span><br/><span class="hl-3">emitter</span><span class="hl-2">.</span><span class="hl-7">emit</span><span class="hl-2">(</span><span class="hl-4">&#39;my-event&#39;</span><span class="hl-2">);</span><br/><span class="hl-3">asyncLocalStorage</span><span class="hl-2">.</span><span class="hl-7">getStore</span><span class="hl-2">(); </span><span class="hl-6">// Returns the same object</span>
</code><button type="button">Copy</button></pre>

</div><div class="tsd-parameters"><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameter-list"><li><span><span class="tsd-kind-parameter">store</span>: <a class="tsd-signature-type tsd-kind-type-parameter" href="node_modules__types_node_async_hooks.async_hooks.AsyncLocalStorage.html#constructorasynclocalstoraget">T</a></span></li></ul></div><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">void</span></h4><div class="tsd-comment tsd-typography"><div class="tsd-tag-since"><h4 class="tsd-anchor-link"><a id="since-2" class="tsd-anchor"></a>Since<a href="#since-2" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h4><p>v13.11.0, v12.17.0</p>
</div></div><aside class="tsd-sources"><ul><li>Defined in node_modules/@types/node/async_hooks.d.ts:536</li></ul></aside></div></li></ul></section><section class="tsd-panel tsd-member tsd-is-external"><a id="exit" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><span>exit</span><a href="#exit" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul class="tsd-signatures tsd-is-external"><li class="tsd-is-external"><div class="tsd-signature tsd-anchor-link"><a id="exit-1" class="tsd-anchor"></a><span class="tsd-kind-call-signature">exit</span><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="node_modules__types_node_async_hooks.async_hooks.AsyncLocalStorage.html#exitr">R</a><span class="tsd-signature-symbol">,</span> <a class="tsd-signature-type tsd-kind-type-parameter" href="node_modules__types_node_async_hooks.async_hooks.AsyncLocalStorage.html#exittargs">TArgs</a> <span class="tsd-signature-keyword">extends</span> <span class="tsd-signature-type">any</span><span class="tsd-signature-symbol">[]</span><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">(</span><span class="tsd-kind-parameter">callback</span><span class="tsd-signature-symbol">:</span> <span class="tsd-signature-symbol">(</span><span class="tsd-signature-symbol">...</span><span class="tsd-kind-parameter">args</span><span class="tsd-signature-symbol">:</span> <a class="tsd-signature-type tsd-kind-type-parameter" href="node_modules__types_node_async_hooks.async_hooks.AsyncLocalStorage.html#exittargs">TArgs</a><span class="tsd-signature-symbol">)</span> <span class="tsd-signature-symbol">=&gt;</span> <a class="tsd-signature-type tsd-kind-type-parameter" href="node_modules__types_node_async_hooks.async_hooks.AsyncLocalStorage.html#exitr">R</a><span class="tsd-signature-symbol">,</span> <span class="tsd-signature-symbol">...</span><span class="tsd-kind-parameter">args</span><span class="tsd-signature-symbol">:</span> <a class="tsd-signature-type tsd-kind-type-parameter" href="node_modules__types_node_async_hooks.async_hooks.AsyncLocalStorage.html#exittargs">TArgs</a><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">:</span> <a class="tsd-signature-type tsd-kind-type-parameter" href="node_modules__types_node_async_hooks.async_hooks.AsyncLocalStorage.html#exitr">R</a><a href="#exit-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></div><div class="tsd-description"><code class="tsd-tag">Experimental</code><div class="tsd-comment tsd-typography"><p>Runs a function synchronously outside of a context and returns its
return value. The store is not accessible within the callback function or
the asynchronous operations created within the callback. Any <code>getStore()</code> call done within the callback function will always return <code>undefined</code>.</p>
<p>The optional <code>args</code> are passed to the callback function.</p>
<p>If the callback function throws an error, the error is thrown by <code>exit()</code> too.
The stacktrace is not impacted by this call and the context is re-entered.</p>
<p>Example:</p>
<pre><code class="js"><span class="hl-6">// Within a call to run</span><br/><span class="hl-1">try</span><span class="hl-2"> {</span><br/><span class="hl-2">  </span><span class="hl-3">asyncLocalStorage</span><span class="hl-2">.</span><span class="hl-7">getStore</span><span class="hl-2">(); </span><span class="hl-6">// Returns the store object or value</span><br/><span class="hl-2">  </span><span class="hl-3">asyncLocalStorage</span><span class="hl-2">.</span><span class="hl-7">exit</span><span class="hl-2">(() </span><span class="hl-0">=&gt;</span><span class="hl-2"> {</span><br/><span class="hl-2">    </span><span class="hl-3">asyncLocalStorage</span><span class="hl-2">.</span><span class="hl-7">getStore</span><span class="hl-2">(); </span><span class="hl-6">// Returns undefined</span><br/><span class="hl-2">    </span><span class="hl-1">throw</span><span class="hl-2"> </span><span class="hl-0">new</span><span class="hl-2"> </span><span class="hl-7">Error</span><span class="hl-2">();</span><br/><span class="hl-2">  });</span><br/><span class="hl-2">} </span><span class="hl-1">catch</span><span class="hl-2"> (</span><span class="hl-3">e</span><span class="hl-2">) {</span><br/><span class="hl-2">  </span><span class="hl-3">asyncLocalStorage</span><span class="hl-2">.</span><span class="hl-7">getStore</span><span class="hl-2">(); </span><span class="hl-6">// Returns the same object or value</span><br/><span class="hl-2">  </span><span class="hl-6">// The error will be caught here</span><br/><span class="hl-2">}</span>
</code><button type="button">Copy</button></pre>

</div><section class="tsd-panel"><h4>Type Parameters</h4><ul class="tsd-type-parameter-list"><li><span><a id="exitr" class="tsd-anchor"></a><span class="tsd-kind-type-parameter">R</span></span></li><li><span><a id="exittargs" class="tsd-anchor"></a><span class="tsd-kind-type-parameter">TArgs</span><span class="tsd-signature-keyword"> extends </span><span class="tsd-signature-type">any</span><span class="tsd-signature-symbol">[]</span></span></li></ul></section><div class="tsd-parameters"><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameter-list"><li><span><span class="tsd-kind-parameter">callback</span>: <span class="tsd-signature-symbol">(</span><span class="tsd-signature-symbol">...</span><span class="tsd-kind-parameter">args</span><span class="tsd-signature-symbol">:</span> <a class="tsd-signature-type tsd-kind-type-parameter" href="node_modules__types_node_async_hooks.async_hooks.AsyncLocalStorage.html#exittargs">TArgs</a><span class="tsd-signature-symbol">)</span> <span class="tsd-signature-symbol">=&gt;</span> <a class="tsd-signature-type tsd-kind-type-parameter" href="node_modules__types_node_async_hooks.async_hooks.AsyncLocalStorage.html#exitr">R</a></span></li><li><span><span class="tsd-signature-symbol">...</span><span class="tsd-kind-parameter">args</span>: <a class="tsd-signature-type tsd-kind-type-parameter" href="node_modules__types_node_async_hooks.async_hooks.AsyncLocalStorage.html#exittargs">TArgs</a></span></li></ul></div><h4 class="tsd-returns-title">Returns <a class="tsd-signature-type tsd-kind-type-parameter" href="node_modules__types_node_async_hooks.async_hooks.AsyncLocalStorage.html#exitr">R</a></h4><div class="tsd-comment tsd-typography"><div class="tsd-tag-since"><h4 class="tsd-anchor-link"><a id="since-3" class="tsd-anchor"></a>Since<a href="#since-3" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h4><p>v13.10.0, v12.17.0</p>
</div></div><aside class="tsd-sources"><ul><li>Defined in node_modules/@types/node/async_hooks.d.ts:495</li></ul></aside></div></li></ul></section><section class="tsd-panel tsd-member tsd-is-external"><a id="getstore" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><span>get<wbr/>Store</span><a href="#getstore" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul class="tsd-signatures tsd-is-external"><li class="tsd-is-external"><div class="tsd-signature tsd-anchor-link"><a id="getstore-1" class="tsd-anchor"></a><span class="tsd-kind-call-signature">getStore</span><span class="tsd-signature-symbol">()</span><span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">undefined</span> <span class="tsd-signature-symbol">|</span> <a class="tsd-signature-type tsd-kind-type-parameter" href="node_modules__types_node_async_hooks.async_hooks.AsyncLocalStorage.html#constructorasynclocalstoraget">T</a><a href="#getstore-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></div><div class="tsd-description"><div class="tsd-comment tsd-typography"><p>Returns the current store.
If called outside of an asynchronous context initialized by
calling <code>asyncLocalStorage.run()</code> or <code>asyncLocalStorage.enterWith()</code>, it
returns <code>undefined</code>.</p>
</div><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">undefined</span> <span class="tsd-signature-symbol">|</span> <a class="tsd-signature-type tsd-kind-type-parameter" href="node_modules__types_node_async_hooks.async_hooks.AsyncLocalStorage.html#constructorasynclocalstoraget">T</a></h4><div class="tsd-comment tsd-typography"><div class="tsd-tag-since"><h4 class="tsd-anchor-link"><a id="since-4" class="tsd-anchor"></a>Since<a href="#since-4" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h4><p>v13.10.0, v12.17.0</p>
</div></div><aside class="tsd-sources"><ul><li>Defined in node_modules/@types/node/async_hooks.d.ts:434</li></ul></aside></div></li></ul></section><section class="tsd-panel tsd-member tsd-is-external"><a id="run" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><span>run</span><a href="#run" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul class="tsd-signatures tsd-is-external"><li class="tsd-is-external"><div class="tsd-signature tsd-anchor-link"><a id="run-1" class="tsd-anchor"></a><span class="tsd-kind-call-signature">run</span><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="node_modules__types_node_async_hooks.async_hooks.AsyncLocalStorage.html#runr">R</a><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">(</span><span class="tsd-kind-parameter">store</span><span class="tsd-signature-symbol">:</span> <a class="tsd-signature-type tsd-kind-type-parameter" href="node_modules__types_node_async_hooks.async_hooks.AsyncLocalStorage.html#constructorasynclocalstoraget">T</a><span class="tsd-signature-symbol">,</span> <span class="tsd-kind-parameter">callback</span><span class="tsd-signature-symbol">:</span> <span class="tsd-signature-symbol">()</span> <span class="tsd-signature-symbol">=&gt;</span> <a class="tsd-signature-type tsd-kind-type-parameter" href="node_modules__types_node_async_hooks.async_hooks.AsyncLocalStorage.html#runr">R</a><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">:</span> <a class="tsd-signature-type tsd-kind-type-parameter" href="node_modules__types_node_async_hooks.async_hooks.AsyncLocalStorage.html#runr">R</a><a href="#run-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></div><div class="tsd-description"><div class="tsd-comment tsd-typography"><p>Runs a function synchronously within a context and returns its
return value. The store is not accessible outside of the callback function.
The store is accessible to any asynchronous operations created within the
callback.</p>
<p>The optional <code>args</code> are passed to the callback function.</p>
<p>If the callback function throws an error, the error is thrown by <code>run()</code> too.
The stacktrace is not impacted by this call and the context is exited.</p>
<p>Example:</p>
<pre><code class="js"><span class="hl-0">const</span><span class="hl-2"> </span><span class="hl-5">store</span><span class="hl-2"> = { </span><span class="hl-3">id:</span><span class="hl-2"> </span><span class="hl-9">2</span><span class="hl-2"> };</span><br/><span class="hl-1">try</span><span class="hl-2"> {</span><br/><span class="hl-2">  </span><span class="hl-3">asyncLocalStorage</span><span class="hl-2">.</span><span class="hl-7">run</span><span class="hl-2">(</span><span class="hl-3">store</span><span class="hl-2">, () </span><span class="hl-0">=&gt;</span><span class="hl-2"> {</span><br/><span class="hl-2">    </span><span class="hl-3">asyncLocalStorage</span><span class="hl-2">.</span><span class="hl-7">getStore</span><span class="hl-2">(); </span><span class="hl-6">// Returns the store object</span><br/><span class="hl-2">    </span><span class="hl-7">setTimeout</span><span class="hl-2">(() </span><span class="hl-0">=&gt;</span><span class="hl-2"> {</span><br/><span class="hl-2">      </span><span class="hl-3">asyncLocalStorage</span><span class="hl-2">.</span><span class="hl-7">getStore</span><span class="hl-2">(); </span><span class="hl-6">// Returns the store object</span><br/><span class="hl-2">    }, </span><span class="hl-9">200</span><span class="hl-2">);</span><br/><span class="hl-2">    </span><span class="hl-1">throw</span><span class="hl-2"> </span><span class="hl-0">new</span><span class="hl-2"> </span><span class="hl-7">Error</span><span class="hl-2">();</span><br/><span class="hl-2">  });</span><br/><span class="hl-2">} </span><span class="hl-1">catch</span><span class="hl-2"> (</span><span class="hl-3">e</span><span class="hl-2">) {</span><br/><span class="hl-2">  </span><span class="hl-3">asyncLocalStorage</span><span class="hl-2">.</span><span class="hl-7">getStore</span><span class="hl-2">(); </span><span class="hl-6">// Returns undefined</span><br/><span class="hl-2">  </span><span class="hl-6">// The error will be caught here</span><br/><span class="hl-2">}</span>
</code><button type="button">Copy</button></pre>

</div><section class="tsd-panel"><h4>Type Parameters</h4><ul class="tsd-type-parameter-list"><li><span><a id="runr" class="tsd-anchor"></a><span class="tsd-kind-type-parameter">R</span></span></li></ul></section><div class="tsd-parameters"><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameter-list"><li><span><span class="tsd-kind-parameter">store</span>: <a class="tsd-signature-type tsd-kind-type-parameter" href="node_modules__types_node_async_hooks.async_hooks.AsyncLocalStorage.html#constructorasynclocalstoraget">T</a></span></li><li><span><span class="tsd-kind-parameter">callback</span>: <span class="tsd-signature-symbol">()</span> <span class="tsd-signature-symbol">=&gt;</span> <a class="tsd-signature-type tsd-kind-type-parameter" href="node_modules__types_node_async_hooks.async_hooks.AsyncLocalStorage.html#runr">R</a></span></li></ul></div><h4 class="tsd-returns-title">Returns <a class="tsd-signature-type tsd-kind-type-parameter" href="node_modules__types_node_async_hooks.async_hooks.AsyncLocalStorage.html#runr">R</a></h4><div class="tsd-comment tsd-typography"><div class="tsd-tag-since"><h4 class="tsd-anchor-link"><a id="since-5" class="tsd-anchor"></a>Since<a href="#since-5" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h4><p>v13.10.0, v12.17.0</p>
</div></div><aside class="tsd-sources"><ul><li>Defined in node_modules/@types/node/async_hooks.d.ts:465</li></ul></aside></div></li><li class="tsd-is-external"><div class="tsd-signature tsd-anchor-link"><a id="run-2" class="tsd-anchor"></a><span class="tsd-kind-call-signature">run</span><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="node_modules__types_node_async_hooks.async_hooks.AsyncLocalStorage.html#runr-1">R</a><span class="tsd-signature-symbol">,</span> <a class="tsd-signature-type tsd-kind-type-parameter" href="node_modules__types_node_async_hooks.async_hooks.AsyncLocalStorage.html#runtargs">TArgs</a> <span class="tsd-signature-keyword">extends</span> <span class="tsd-signature-type">any</span><span class="tsd-signature-symbol">[]</span><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">(</span><br/>    <span class="tsd-kind-parameter">store</span><span class="tsd-signature-symbol">:</span> <a class="tsd-signature-type tsd-kind-type-parameter" href="node_modules__types_node_async_hooks.async_hooks.AsyncLocalStorage.html#constructorasynclocalstoraget">T</a><span class="tsd-signature-symbol">,</span><br/>    <span class="tsd-kind-parameter">callback</span><span class="tsd-signature-symbol">:</span> <span class="tsd-signature-symbol">(</span><span class="tsd-signature-symbol">...</span><span class="tsd-kind-parameter">args</span><span class="tsd-signature-symbol">:</span> <a class="tsd-signature-type tsd-kind-type-parameter" href="node_modules__types_node_async_hooks.async_hooks.AsyncLocalStorage.html#runtargs">TArgs</a><span class="tsd-signature-symbol">)</span> <span class="tsd-signature-symbol">=&gt;</span> <a class="tsd-signature-type tsd-kind-type-parameter" href="node_modules__types_node_async_hooks.async_hooks.AsyncLocalStorage.html#runr-1">R</a><span class="tsd-signature-symbol">,</span><br/>    <span class="tsd-signature-symbol">...</span><span class="tsd-kind-parameter">args</span><span class="tsd-signature-symbol">:</span> <a class="tsd-signature-type tsd-kind-type-parameter" href="node_modules__types_node_async_hooks.async_hooks.AsyncLocalStorage.html#runtargs">TArgs</a><span class="tsd-signature-symbol">,</span><br/><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">:</span> <a class="tsd-signature-type tsd-kind-type-parameter" href="node_modules__types_node_async_hooks.async_hooks.AsyncLocalStorage.html#runr-1">R</a><a href="#run-2" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></div><div class="tsd-description"><div class="tsd-comment tsd-typography"><p>Runs a function synchronously within a context and returns its
return value. The store is not accessible outside of the callback function.
The store is accessible to any asynchronous operations created within the
callback.</p>
<p>The optional <code>args</code> are passed to the callback function.</p>
<p>If the callback function throws an error, the error is thrown by <code>run()</code> too.
The stacktrace is not impacted by this call and the context is exited.</p>
<p>Example:</p>
<pre><code class="js"><span class="hl-0">const</span><span class="hl-2"> </span><span class="hl-5">store</span><span class="hl-2"> = { </span><span class="hl-3">id:</span><span class="hl-2"> </span><span class="hl-9">2</span><span class="hl-2"> };</span><br/><span class="hl-1">try</span><span class="hl-2"> {</span><br/><span class="hl-2">  </span><span class="hl-3">asyncLocalStorage</span><span class="hl-2">.</span><span class="hl-7">run</span><span class="hl-2">(</span><span class="hl-3">store</span><span class="hl-2">, () </span><span class="hl-0">=&gt;</span><span class="hl-2"> {</span><br/><span class="hl-2">    </span><span class="hl-3">asyncLocalStorage</span><span class="hl-2">.</span><span class="hl-7">getStore</span><span class="hl-2">(); </span><span class="hl-6">// Returns the store object</span><br/><span class="hl-2">    </span><span class="hl-7">setTimeout</span><span class="hl-2">(() </span><span class="hl-0">=&gt;</span><span class="hl-2"> {</span><br/><span class="hl-2">      </span><span class="hl-3">asyncLocalStorage</span><span class="hl-2">.</span><span class="hl-7">getStore</span><span class="hl-2">(); </span><span class="hl-6">// Returns the store object</span><br/><span class="hl-2">    }, </span><span class="hl-9">200</span><span class="hl-2">);</span><br/><span class="hl-2">    </span><span class="hl-1">throw</span><span class="hl-2"> </span><span class="hl-0">new</span><span class="hl-2"> </span><span class="hl-7">Error</span><span class="hl-2">();</span><br/><span class="hl-2">  });</span><br/><span class="hl-2">} </span><span class="hl-1">catch</span><span class="hl-2"> (</span><span class="hl-3">e</span><span class="hl-2">) {</span><br/><span class="hl-2">  </span><span class="hl-3">asyncLocalStorage</span><span class="hl-2">.</span><span class="hl-7">getStore</span><span class="hl-2">(); </span><span class="hl-6">// Returns undefined</span><br/><span class="hl-2">  </span><span class="hl-6">// The error will be caught here</span><br/><span class="hl-2">}</span>
</code><button type="button">Copy</button></pre>

</div><section class="tsd-panel"><h4>Type Parameters</h4><ul class="tsd-type-parameter-list"><li><span><a id="runr-1" class="tsd-anchor"></a><span class="tsd-kind-type-parameter">R</span></span></li><li><span><a id="runtargs" class="tsd-anchor"></a><span class="tsd-kind-type-parameter">TArgs</span><span class="tsd-signature-keyword"> extends </span><span class="tsd-signature-type">any</span><span class="tsd-signature-symbol">[]</span></span></li></ul></section><div class="tsd-parameters"><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameter-list"><li><span><span class="tsd-kind-parameter">store</span>: <a class="tsd-signature-type tsd-kind-type-parameter" href="node_modules__types_node_async_hooks.async_hooks.AsyncLocalStorage.html#constructorasynclocalstoraget">T</a></span></li><li><span><span class="tsd-kind-parameter">callback</span>: <span class="tsd-signature-symbol">(</span><span class="tsd-signature-symbol">...</span><span class="tsd-kind-parameter">args</span><span class="tsd-signature-symbol">:</span> <a class="tsd-signature-type tsd-kind-type-parameter" href="node_modules__types_node_async_hooks.async_hooks.AsyncLocalStorage.html#runtargs">TArgs</a><span class="tsd-signature-symbol">)</span> <span class="tsd-signature-symbol">=&gt;</span> <a class="tsd-signature-type tsd-kind-type-parameter" href="node_modules__types_node_async_hooks.async_hooks.AsyncLocalStorage.html#runr-1">R</a></span></li><li><span><span class="tsd-signature-symbol">...</span><span class="tsd-kind-parameter">args</span>: <a class="tsd-signature-type tsd-kind-type-parameter" href="node_modules__types_node_async_hooks.async_hooks.AsyncLocalStorage.html#runtargs">TArgs</a></span></li></ul></div><h4 class="tsd-returns-title">Returns <a class="tsd-signature-type tsd-kind-type-parameter" href="node_modules__types_node_async_hooks.async_hooks.AsyncLocalStorage.html#runr-1">R</a></h4><div class="tsd-comment tsd-typography"><div class="tsd-tag-since"><h4 class="tsd-anchor-link"><a id="since-6" class="tsd-anchor"></a>Since<a href="#since-6" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h4><p>v13.10.0, v12.17.0</p>
</div></div><aside class="tsd-sources"><ul><li>Defined in node_modules/@types/node/async_hooks.d.ts:466</li></ul></aside></div></li></ul></section><section class="tsd-panel tsd-member tsd-is-external"><a id="bind" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><code class="tsd-tag">Static</code><span>bind</span><a href="#bind" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul class="tsd-signatures tsd-is-external"><li class="tsd-is-external"><div class="tsd-signature tsd-anchor-link"><a id="bind-1" class="tsd-anchor"></a><span class="tsd-kind-call-signature">bind</span><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="node_modules__types_node_async_hooks.async_hooks.AsyncLocalStorage.html#bindfunc">Func</a> <span class="tsd-signature-keyword">extends</span> <span class="tsd-signature-symbol">(</span><span class="tsd-signature-symbol">...</span><span class="tsd-kind-parameter">args</span><span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">any</span><span class="tsd-signature-symbol">[]</span><span class="tsd-signature-symbol">)</span> <span class="tsd-signature-symbol">=&gt;</span> <span class="tsd-signature-type">any</span><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">(</span><span class="tsd-kind-parameter">fn</span><span class="tsd-signature-symbol">:</span> <a class="tsd-signature-type tsd-kind-type-parameter" href="node_modules__types_node_async_hooks.async_hooks.AsyncLocalStorage.html#bindfunc">Func</a><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">:</span> <a class="tsd-signature-type tsd-kind-type-parameter" href="node_modules__types_node_async_hooks.async_hooks.AsyncLocalStorage.html#bindfunc">Func</a><a href="#bind-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></div><div class="tsd-description"><code class="tsd-tag">Experimental</code><div class="tsd-comment tsd-typography"><p>Binds the given function to the current execution context.</p>
</div><section class="tsd-panel"><h4>Type Parameters</h4><ul class="tsd-type-parameter-list"><li><span><a id="bindfunc" class="tsd-anchor"></a><span class="tsd-kind-type-parameter">Func</span><span class="tsd-signature-keyword"> extends </span><span class="tsd-signature-symbol">(</span><span class="tsd-signature-symbol">...</span><span class="tsd-kind-parameter">args</span><span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">any</span><span class="tsd-signature-symbol">[]</span><span class="tsd-signature-symbol">)</span> <span class="tsd-signature-symbol">=&gt;</span> <span class="tsd-signature-type">any</span></span></li></ul></section><div class="tsd-parameters"><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameter-list"><li><span><span class="tsd-kind-parameter">fn</span>: <a class="tsd-signature-type tsd-kind-type-parameter" href="node_modules__types_node_async_hooks.async_hooks.AsyncLocalStorage.html#bindfunc">Func</a></span><div class="tsd-comment tsd-typography"><p>The function to bind to the current execution context.</p>
</div><div class="tsd-comment tsd-typography"></div></li></ul></div><h4 class="tsd-returns-title">Returns <a class="tsd-signature-type tsd-kind-type-parameter" href="node_modules__types_node_async_hooks.async_hooks.AsyncLocalStorage.html#bindfunc">Func</a></h4><p>A new function that calls <code>fn</code> within the captured execution context.</p>
<div class="tsd-comment tsd-typography"><div class="tsd-tag-since"><h4 class="tsd-anchor-link"><a id="since-7" class="tsd-anchor"></a>Since<a href="#since-7" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h4><p>v19.8.0</p>
</div></div><aside class="tsd-sources"><ul><li>Defined in node_modules/@types/node/async_hooks.d.ts:379</li></ul></aside></div></li></ul></section><section class="tsd-panel tsd-member tsd-is-external"><a id="snapshot" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><code class="tsd-tag">Static</code><span>snapshot</span><a href="#snapshot" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul class="tsd-signatures tsd-is-external"><li class="tsd-is-external"><div class="tsd-signature tsd-anchor-link"><a id="snapshot-1" class="tsd-anchor"></a><span class="tsd-kind-call-signature">snapshot</span><span class="tsd-signature-symbol">()</span><span class="tsd-signature-symbol">:</span> <span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="">R</a><span class="tsd-signature-symbol">,</span> <a class="tsd-signature-type tsd-kind-type-parameter" href="">TArgs</a> <span class="tsd-signature-keyword">extends</span> <span class="tsd-signature-type">any</span><span class="tsd-signature-symbol">[]</span><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">(</span><br/>    <span class="tsd-kind-parameter">fn</span><span class="tsd-signature-symbol">:</span> <span class="tsd-signature-symbol">(</span><span class="tsd-signature-symbol">...</span><span class="tsd-kind-parameter">args</span><span class="tsd-signature-symbol">:</span> <a class="tsd-signature-type tsd-kind-type-parameter" href="">TArgs</a><span class="tsd-signature-symbol">)</span> <span class="tsd-signature-symbol">=&gt;</span> <a class="tsd-signature-type tsd-kind-type-parameter" href="">R</a><span class="tsd-signature-symbol">,</span><br/>    <span class="tsd-signature-symbol">...</span><span class="tsd-kind-parameter">args</span><span class="tsd-signature-symbol">:</span> <a class="tsd-signature-type tsd-kind-type-parameter" href="">TArgs</a><span class="tsd-signature-symbol">,</span><br/><span class="tsd-signature-symbol">)</span> <span class="tsd-signature-symbol">=&gt;</span> <a class="tsd-signature-type tsd-kind-type-parameter" href="">R</a><a href="#snapshot-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></div><div class="tsd-description"><code class="tsd-tag">Experimental</code><div class="tsd-comment tsd-typography"><p>Captures the current execution context and returns a function that accepts a
function as an argument. Whenever the returned function is called, it
calls the function passed to it within the captured context.</p>
<pre><code class="js"><span class="hl-0">const</span><span class="hl-2"> </span><span class="hl-5">asyncLocalStorage</span><span class="hl-2"> = </span><span class="hl-0">new</span><span class="hl-2"> </span><span class="hl-7">AsyncLocalStorage</span><span class="hl-2">();</span><br/><span class="hl-0">const</span><span class="hl-2"> </span><span class="hl-5">runInAsyncScope</span><span class="hl-2"> = </span><span class="hl-3">asyncLocalStorage</span><span class="hl-2">.</span><span class="hl-7">run</span><span class="hl-2">(</span><span class="hl-9">123</span><span class="hl-2">, () </span><span class="hl-0">=&gt;</span><span class="hl-2"> </span><span class="hl-3">AsyncLocalStorage</span><span class="hl-2">.</span><span class="hl-7">snapshot</span><span class="hl-2">());</span><br/><span class="hl-0">const</span><span class="hl-2"> </span><span class="hl-5">result</span><span class="hl-2"> = </span><span class="hl-3">asyncLocalStorage</span><span class="hl-2">.</span><span class="hl-7">run</span><span class="hl-2">(</span><span class="hl-9">321</span><span class="hl-2">, () </span><span class="hl-0">=&gt;</span><span class="hl-2"> </span><span class="hl-7">runInAsyncScope</span><span class="hl-2">(() </span><span class="hl-0">=&gt;</span><span class="hl-2"> </span><span class="hl-3">asyncLocalStorage</span><span class="hl-2">.</span><span class="hl-7">getStore</span><span class="hl-2">()));</span><br/><span class="hl-3">console</span><span class="hl-2">.</span><span class="hl-7">log</span><span class="hl-2">(</span><span class="hl-3">result</span><span class="hl-2">);  </span><span class="hl-6">// returns 123</span>
</code><button type="button">Copy</button></pre>

<p>AsyncLocalStorage.snapshot() can replace the use of AsyncResource for simple
async context tracking purposes, for example:</p>
<pre><code class="js"><span class="hl-0">class</span><span class="hl-2"> </span><span class="hl-12">Foo</span><span class="hl-2"> {</span><br/><span class="hl-2">  </span><span class="hl-3">#runInAsyncScope</span><span class="hl-2"> = </span><span class="hl-3">AsyncLocalStorage</span><span class="hl-2">.</span><span class="hl-7">snapshot</span><span class="hl-2">();</span><br/><br/><span class="hl-2">  </span><span class="hl-7">get</span><span class="hl-2">() { </span><span class="hl-1">return</span><span class="hl-2"> </span><span class="hl-0">this</span><span class="hl-2">.</span><span class="hl-7">#runInAsyncScope</span><span class="hl-2">(() </span><span class="hl-0">=&gt;</span><span class="hl-2"> </span><span class="hl-3">asyncLocalStorage</span><span class="hl-2">.</span><span class="hl-7">getStore</span><span class="hl-2">()); }</span><br/><span class="hl-2">}</span><br/><br/><span class="hl-0">const</span><span class="hl-2"> </span><span class="hl-5">foo</span><span class="hl-2"> = </span><span class="hl-3">asyncLocalStorage</span><span class="hl-2">.</span><span class="hl-7">run</span><span class="hl-2">(</span><span class="hl-9">123</span><span class="hl-2">, () </span><span class="hl-0">=&gt;</span><span class="hl-2"> </span><span class="hl-0">new</span><span class="hl-2"> </span><span class="hl-7">Foo</span><span class="hl-2">());</span><br/><span class="hl-3">console</span><span class="hl-2">.</span><span class="hl-7">log</span><span class="hl-2">(</span><span class="hl-3">asyncLocalStorage</span><span class="hl-2">.</span><span class="hl-7">run</span><span class="hl-2">(</span><span class="hl-9">321</span><span class="hl-2">, () </span><span class="hl-0">=&gt;</span><span class="hl-2"> </span><span class="hl-3">foo</span><span class="hl-2">.</span><span class="hl-7">get</span><span class="hl-2">())); </span><span class="hl-6">// returns 123</span>
</code><button type="button">Copy</button></pre>

</div><h4 class="tsd-returns-title">Returns <span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="">R</a><span class="tsd-signature-symbol">,</span> <a class="tsd-signature-type tsd-kind-type-parameter" href="">TArgs</a> <span class="tsd-signature-keyword">extends</span> <span class="tsd-signature-type">any</span><span class="tsd-signature-symbol">[]</span><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">(</span><span class="tsd-kind-parameter">fn</span><span class="tsd-signature-symbol">:</span> <span class="tsd-signature-symbol">(</span><span class="tsd-signature-symbol">...</span><span class="tsd-kind-parameter">args</span><span class="tsd-signature-symbol">:</span> <a class="tsd-signature-type tsd-kind-type-parameter" href="">TArgs</a><span class="tsd-signature-symbol">)</span> <span class="tsd-signature-symbol">=&gt;</span> <a class="tsd-signature-type tsd-kind-type-parameter" href="">R</a><span class="tsd-signature-symbol">,</span> <span class="tsd-signature-symbol">...</span><span class="tsd-kind-parameter">args</span><span class="tsd-signature-symbol">:</span> <a class="tsd-signature-type tsd-kind-type-parameter" href="">TArgs</a><span class="tsd-signature-symbol">)</span> <span class="tsd-signature-symbol">=&gt;</span> <a class="tsd-signature-type tsd-kind-type-parameter" href="">R</a></h4><p>A new function with the signature <code>(fn: (...args) : R, ...args) : R</code>.</p>
<div class="tsd-comment tsd-typography"><div class="tsd-tag-since"><h4 class="tsd-anchor-link"><a id="since-8" class="tsd-anchor"></a>Since<a href="#since-8" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h4><p>v19.8.0</p>
</div></div><aside class="tsd-sources"><ul><li>Defined in node_modules/@types/node/async_hooks.d.ts:409</li></ul></aside></div></li></ul></section></section></details></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>On This Page</h3></summary><div class="tsd-accordion-details"><details open class="tsd-accordion tsd-page-navigation-section"><summary class="tsd-accordion-summary" data-key="section-Constructors"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>Constructors</summary><div><a href="#constructor" class="tsd-is-external"><svg class="tsd-kind-icon" viewBox="0 0 24 24" aria-label="Constructor"><use href="../assets/icons.svg#icon-512"></use></svg><span>constructor</span></a></div></details><details open class="tsd-accordion tsd-page-navigation-section"><summary class="tsd-accordion-summary" data-key="section-Methods"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>Methods</summary><div><a href="#disable" class="tsd-is-external"><svg class="tsd-kind-icon" viewBox="0 0 24 24" aria-label="Method"><use href="../assets/icons.svg#icon-2048"></use></svg><span>disable</span></a><a href="#enterwith" class="tsd-is-external"><svg class="tsd-kind-icon" viewBox="0 0 24 24" aria-label="Method"><use href="../assets/icons.svg#icon-2048"></use></svg><span>enter<wbr/>With</span></a><a href="#exit" class="tsd-is-external"><svg class="tsd-kind-icon" viewBox="0 0 24 24" aria-label="Method"><use href="../assets/icons.svg#icon-2048"></use></svg><span>exit</span></a><a href="#getstore" class="tsd-is-external"><svg class="tsd-kind-icon" viewBox="0 0 24 24" aria-label="Method"><use href="../assets/icons.svg#icon-2048"></use></svg><span>get<wbr/>Store</span></a><a href="#run" class="tsd-is-external"><svg class="tsd-kind-icon" viewBox="0 0 24 24" aria-label="Method"><use href="../assets/icons.svg#icon-2048"></use></svg><span>run</span></a><a href="#bind" class="tsd-is-external"><svg class="tsd-kind-icon" viewBox="0 0 24 24" aria-label="Method"><use href="../assets/icons.svg#icon-2048"></use></svg><span>bind</span></a><a href="#snapshot" class="tsd-is-external"><svg class="tsd-kind-icon" viewBox="0 0 24 24" aria-label="Method"><use href="../assets/icons.svg#icon-2048"></use></svg><span>snapshot</span></a></div></details></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="../index.html">Documentation</a><ul class="tsd-small-nested-navigation" id="tsd-nav-container"><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>
